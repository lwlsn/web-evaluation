<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
	<meta charset="utf-8">

	<!-- Integrate Firebase into project -->
	<!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/7.12.0/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.12.0/firebase-firestore.js"></script>

	<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->


	<!-- Include js scripts-->
	<script src="js/dynamic.js"></script>
	<script src="js/app.js"></script>
	<script src="js/config.js"></script>

	<!--Vue development version, includes helpful console warnings -->
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

	<!-- Include jquery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<!--- Study CSS outline-->
	<link rel="stylesheet" type="text/css" href="css/style.css">

	<title> User Study </title>

</head>

<body onload="setup()" style="margin:5px;padding:5px;">
	<div class="header" id="topbar">
		<img src="logo.gif" id="MATLogo" alt=""><img src="QMLogo_small.png" id="QMLogoSmall" alt=""><img
			src="QMLogo.png" id="QMLogo" alt="">
		<h1 id="headerText">Evaluating Models of Affective Response </h1>

	</div>


	<!-- introduction pages -->

	<div class="page" id="study-introduction">
		<div class="main" id="main1">
			<h2>Introduction to the Study - Evaluating Models of Affective Response through Listener Perception of
				Musical Patterns</h2>

			<p> We would like to invite you to be part of this research about musical pattern and emotion. Participation
				in the study is optional. If you choose not to take part there wonâ€™t be any disadvantages for you and
				you will hear no more about it.</p>

			<p> Please read the following information carefully before you decide to take part; this will tell you why
				the research is being done and what you will be asked to do if you take part. Please contact me
				<a href=mailto:elizabeth.wilson@qmul.ac.uk">by email</a> if there is anything unclear
				or if you would like more information. </p>


			<p> You will initially be asked a few demographic questions designed to assess your musical background and
				engagement levels.
				You will be then presented with the test that allows you to play short audio clips. You are asked to
				listen to all the clips presented for the duration of the listening test. This should be completed using
				good quality headphones and in a quiet space, free from interruption. The study should take around 20
				minutes to complete.</p>

			<p> After listening, you will be asked to give an evaluative rating of the perceived emotional content to
				the audio. To do so, you be asked to place a slider on a 2-dimensional grid and rate the pieces listened
				to and rate them in terms of how positive/negative they are and how high/low energy they are. </p>

		</div>

		<div class="navi">
			<p>
				<button id="introduction-next-button" onclick="nextPage()" class="button" value="hide"> Next </button>
				<a href="mailto:elizabeth.wilson@qmul.ac.uk"> contact </a>
				<span id="page-ref" class="page-ref"> </span>
			</p>
		</div>
	</div>



	<!-- consent pages -->

	<div class="page" id="consent-pages">

		<div class="main" id="main2">
			<h2> Consent data - Evaluating Models of Affective Response through Listener Perception of
				Rhythmic Patterns </h2>

			<p> Please provide your consent to the following statements to proceed with this study:</p>

			<p>
				<label class="container" id="consent">
					I agree that the research project named above has been explained to me
					to my satisfaction on the information page.
					<input type="checkbox" id="consent1" form="survey" value="yes">
					<span class="checkmark"></span>
				</label>
			</p>

			<p>
				<label class="container" id="consent">
					I understand that if I decide at any other time during the research that I no longer wish to
					participate in this study, I can notify the researchers through the email address provided
					and be withdrawn from it immediately.
					<input type="checkbox" id="consent2" form="survey" value="yes">
					<span class="checkmark"></span>
				</label>
			</p>


			<p>
				<label class="container" id="consent">
					I have read the information page and understand
					what the research study involves
					<input type="checkbox" id="consent3" form="survey" value="yes">
					<span class="checkmark"></span>
				</label>
			</p>


			<p>
				<label class="container" id="consent">
					I agree to take part in the study, which will include use of my personal data. The data will be
					anonymised, stored securely and not shared with any third parties.
					<input type="checkbox" id="consent4" form="survey" value="yes">
					<span class="checkmark"></span>
				</label>
			</p>

		</div>

		<div class="navi">
			<p>
				<button id="consent-button" class="button" value="hide"> Next </button>
				<a href="mailto:elizabeth.wilson@qmul.ac.uk"> contact </a>
				<span id="page-ref" class="page-ref"> </span>
			</p>
		</div>

		<script>
			$('#consent-button').click(function () {
				//array of booleans checking whether each val has been clicked or not.. 
				var checkboxTicked = [($('#consent1').prop('checked')), ($('#consent2').prop('checked')),
				($('#consent3').prop('checked')), ($('#consent4').prop('checked'))];
				console.log(checkboxTicked[0], checkboxTicked[1], checkboxTicked[2], checkboxTicked[3]);

				var isOkay = false; // set variable to false, only allow to refresh to next page in update to true.
				// when all boxes checked, set condition to true
				if (checkboxTicked[0] == true && checkboxTicked[1] == true && checkboxTicked[2] && checkboxTicked[3]) {
					isOkay = true;
				}
				// when false alert and forbid users from commencing.. 
				if (isOkay == false) {
					alert('all data consent questions must be agreed to..')
				} else {
					nextPage();
				}
			})

		</script>



	</div>

	<!-- Participant Information -->
	<div class="page" id="participant-info">
		<div class="main" id="main3">
			<h2> Participant Data Information </h2>

			<form>

				<p>I would best describe my current occupation as: </p>

				<div>

					<label class="container"> At School
						<input type="radio" name="employment" id="school" value="school">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> At University
						<input type="radio" name="employment" id="university" value="university">
						<span class="checkmark"></span>
					</label>

					<label class="container"> In Full-time Employment
						<input type="radio" name="employment" id="full-time" value="full-time">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> In Part-time Employment
						<input type="radio" name="employment" id="part-time" value="part-time">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Self-Employed
						<input type="radio" name="employment" id="self" value="self">
						<span class="checkmark"></span>
					</label>

					<label class="container"> Full-time Parent
						<input type="radio" name="employment" id="parent" value="parent">
						<span class="checkmark"></span>
					</label>

					<label class="container"> Retired
						<input type="radio" name="employment" id="retired" value="retired">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Other
						<input type="radio" name="employment" id="other" value="other">
						<span class="checkmark"></span>
					</label>

					<p>
						<label for="other-text"> If other please specify: </label> </p>
					<input type="text" name="employment" id="other-text">



				</div>

				<p> My age range is: </p>

				<div id="age-radio">

					<label class="container"> 18-24
						<input type="radio" name="age" id="18-24" value="18-24">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> 25-34
						<input type="radio" name="age" id="25-34" value="25-34">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> 35-44
						<input type="radio" name="age" id="35-44" value="35-44">
						<span class="checkmark"></span>
					</label>

					<label class="container"> 45-54
						<input type="radio" name="age" id="45-54" value="45-54">
						<span class="checkmark"></span>
					</label>

					<label class="container"> 55-64
						<input type="radio" name="age" id="55-64" value="55-64">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> 65+
						<input type="radio" name="age" id="65+" value="65+">
						<span class="checkmark"></span>
					</label>

				</div>


				<p> I would describe my gender as: </p>
				<input type="text" id="gender-data" name="gender">
				<label for="gender"> </label>

				<!-- To choose from a dropdown list..? -->
				<!-- <p> I would describe my nationality as : </p>
				<input type="text" id="nationality-data" name="nationality">
				<label for="nationality"> </label> -->

				<p>I would describe my nationality as: </p>
				<label for="nationality"> </label>
				<input type="text" id="nationality-data" name="nationality">


				<p> The countr(ies) that I spent most of my formative years in was: </p>
				<input type="text" id="formative-data" name="formative">
				<label for="nationality"> </label>




				<div class="submit">
					<p>
						<button id="submit-demographics" class="button" onclick="deleteAfterClick()"> Submit </button>
					</p>
				</div>

			</form>


		</div>


		<div class="navi">
			<p>
				<button id="participant-next-button" onclick="nextPage()" class="button" style="visibility:hidden;">
					Next </button>
				<a href="mailto:elizabeth.wilson@qmul.ac.uk"> contact </a>
				<span id="page-ref" class="page-ref"> </span>
			</p>
		</div>



		<script>
			function deleteAfterClick() {
				var demographicButton = document.getElementById("submit-demographics");
				demographicButton.style.visibility = "hidden";

				var nextButton = document.getElementById("participant-next-button");
				nextButton.style.visibility = "visible";
			}
		</script>



	</div>



	<!-- goldsmiths msi page -->

	<div class="page" id="gold-msi">


		<div class="main" id="main4">
			<h2> Musical Background Questionnaire </h2>

			<form>

				<p>Please answer the following questions as accurately as possible:</p>

				<p>In the past twelve months, I have attended ... live music events:</p>

				<p>
				<div id="goldmsi-events">

					<label class="container"> 0-1
						<input type="radio" name="events" id="events1" value="0-1">
						<span class="checkmark"></span>
					</label>

					<label class="container"> 2-3
						<input type="radio" name="events" id="events2" value="2-3">
						<span class="checkmark"></span>
					</label>

					<label class="container"> 4-6
						<input type="radio" name="events" id="events3" value="4-6">
						<span class="checkmark"> </span>
					</label>


					<label class="container"> 7-10
						<input type="radio" name="events" id="events4" value="7-10">
						<span class="checkmark"> </span>
					</label>


					<label class="container"> 11+
						<input type="radio" name="events" id="events5" value="11+">
						<span class="checkmark"></span>
					</label>



				</div>
				</p>



				<p> I listen attentively to music for ... daily:</p>

				<p>
				<div id="goldmsi-listen">

					<label class="container"> 0-15 min
						<input type="radio" name="listening" id="listening1" value="0-15">
						<span class="checkmark"></span>
					</label>

					<label class="container"> 15-30 min
						<input type="radio" name="listening" id="listening2" value="15-30">
						<span class="checkmark"></span>
					</label>

					<label class="container"> 30-60 min
						<input type="radio" name="listening" id="listening3" value="30-60">
						<span class="checkmark"></span>
					</label>

					<label class="container"> 1-2 hrs
						<input type="radio" name="listening" id="listening4" value="1-2">
						<span class="checkmark"></span>
					</label>

					<label class="container"> 2-4 hrs
						<input type="radio" name="listening" id="listening5" value="2-4">
						<span class="checkmark"></span>
					</label>

					<label class="container"> 4+ hrs
						<input type="radio" name="listening" id="listening6" value="4+">
						<span class="checkmark"></span>
					</label>


				</div>
				</p>


				<p> I would not consider myself a musician: </p>

				<p>
				<div id="goldmsi-musicianship">

					<label class="container"> Strongly Disagree
						<input type="radio" name="musician" id="musician1" value="-2">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Disagree
						<input type="radio" name="musician" id="musician2" value="-1">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Neither agree or disagree
						<input type="radio" name="musician" id="musician3" value="0">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Agree
						<input type="radio" name="musician" id="musician4" value="1">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Strongly Agree
						<input type="radio" name="musician" id="musician5" value="2">
						<span class="checkmark"> </span>
					</label>

				</div>
				</p>


				<p> Pieces of music rarely evoke emotions for me: </p>
				<p>
				<div id="goldmsi-emotions">

					<label class="container"> Strongly Disagree
						<input type="radio" name="emotions1" id="emotions11" value="-2">
						<span class="checkmark"> </span>
					</label>


					<label class="container"> Disagree
						<input type="radio" name="emotions1" id="emotions12" value="-1">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Neither agree or disagree
						<input type="radio" name="emotions1" id="emotions13" value="0">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Agree
						<input type="radio" name="emotions1" id="emotions14" value="1">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Strongly Agree
						<input type="radio" name="emotions1" id="emotions15" value="2">
						<span class="checkmark"> </span>
					</label>


				</div>

				</p>


				<p> Music can evoke my memories of past people and places: </p>

				<p>
				<div id="goldmsi-emotions2">


					<label class="container"> Strongly Disagree
						<input type="radio" name="emotions2" id="emotions21" value="-2">
						<span class="checkmark"> </span>
					</label>


					<label class="container"> Disagree
						<input type="radio" name="emotions2" id="emotions22" value="-1">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Neither agree or disagree
						<input type="radio" name="emotions2" id="emotions23" value="0">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Agree
						<input type="radio" name="emotions2" id="emotions24" value="1">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Strongly Agree
						<input type="radio" name="emotions2" id="emotions25" value="2">
						<span class="checkmark"> </span>
					</label>

				</div>
				</p>


				<p>I am able to talk about the emotions that a piece of music evokes for me: </p>
				<p>
				<div id="goldmsi-emotions3">

					<label class="container"> Strongly Disagree
						<input type="radio" name="emotions3" id="emotions31" value="-2">
						<span class="checkmark"> </span>
					</label>


					<label class="container"> Disagree
						<input type="radio" name="emotions3" id="emotions32" value="-1">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Neither agree or disagree
						<input type="radio" name="emotions3" id="emotions33" value="0">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Agree
						<input type="radio" name="emotions3" id="emotions34" value="1">
						<span class="checkmark"> </span>
					</label>

					<label class="container"> Strongly Agree
						<input type="radio" name="emotions3" id="emotions35" value="2">
						<span class="checkmark"> </span>
					</label>
				</div>
				</p>


				<div class="submit">
					<p>
						<button id="submit-goldsmiths" class="button" onclick="secondDeleteAfterClick()"> Submit
						</button>
					</p>
				</div>
				</p>


			</form>


		</div>

		<div class="navi">
			<p>
				<button id="gold-next-button" onclick="nextPage()" class="button" style="visibility:hidden;"> Next
				</button>
				<a href="mailto:elizabeth.wilson@qmul.ac.uk">contact </a>
				<span id="page-ref" class="page-ref"> </span>
			</p>
		</div>


		<script>
			function secondDeleteAfterClick() {
				var demographicButton = document.getElementById("submit-goldsmiths");
				demographicButton.style.visibility = "hidden";

				var goldNextButton = document.getElementById("gold-next-button");
				goldNextButton.style.visibility = "visible";
			}
		</script>
	</div>



	<!-- test pages using vue to update text -->

	<div class="page" id="vue-pages">

		<div class="main" id="app-1" onload="Application.init()">

			<template>
				<div class="container" style="left:80%">
					<div class="loading-bar">
						<div class="percentage" :style="{'width' : percentage + '%'}"></div>
					</div>
				</div>
			</template>


			<p id="message1" class="message-tag"> {{ message0 }} </p>

			<p id="message2" class="message-tag"> {{message1 }}
			<p>

			<p id="message3" class="message-tag"> {{ message2 }} </p>

			<p id="message4" class="message-tag"> {{ message3 }} </p>


			<p>
			<div class="audio-player">

				<audio id="audio" class="audio-tag" controls>
					<source src="assets/HV-LA.wav" id="track" type="audio/wav">
					Your browser does not support the audio element!
				</audio>
			</div>

			</p>



			<div class="application" style="margin:0px; padding:0px;">
				<canvas width="320" height="320" id="canvas" style="position:relative; top:40%; left:37%;">
					<span id="canvas-marker"></span>
					Your browser does not support the HTML5 Canvas
				</canvas>
				<div style="font-size:40px;font-weight:bold; position:relative; top:-400px; left:45%" id="label"> </div>
			</div>


			<div class="submit">
				<p>
					<button id="submit-vue" class="button" onclick="thirdDeleteAfterClick()"
						style="visibility: hidden;"> Submit </button>
				</p>
			</div>


			<div class="navi">
				<p>
					<button id="next-button-vue" v-on:click="setNewValue()" onclick="buttonPressed()" class="button">
						Next </button>
					<a href="mailto:elizabeth.wilson@qmul.ac.uk"> contact </a>
					<span id="page-ref" class="page-ref"> </span>
				</p>


			</div>


			<script>


				function thirdDeleteAfterClick() {
					var submitButton = document.getElementById("submit-vue");
					var nextButton = document.getElementById("next-button-vue");

					submitButton.style.visibility = "hidden";
					nextButton.style.visibility = "visible";

				}



				const vueNextButton = document.querySelector('#next-button-vue');


				vueNextButton.addEventListener('click', (evt) => {
				evt.preventDefault();
				// console.log(participantId);

				const rect = canvas.getBoundingClientRect();

				var x = (event.clientX-rect.left)/320;
				var y = 1 - ((event.clientY-rect.top)/320);

				var audio = document.getElementById('audio');
				var audioFile = audio.src;

				// console.log(x, y);

				db.collection('StudyData').add({
					id: participantId, 
					xPos: x,
					yPos: y, 
					audio: audioFile
				})

				});

			</script>


		</div>











	</div>


	<script type="text/javascript">

	</script>



	<script src="js/firebase.js"></script>
	<script src="js/main.js"></script>
</body>

</html>